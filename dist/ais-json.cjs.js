"use strict";var e,t=require("i18n"),a=(e=t)&&"object"==typeof e&&"default"in e?e.default:e;a.configure({locales:["en","cn"],defaultLocale:"en",directory:__dirname+"/locales",register:global});var n={0:"000000",1:"000001",2:"000010",3:"000011",4:"000100",5:"000101",6:"000110",7:"000111",8:"001000",9:"001001",":":"001010",";":"001011","<":"001100","=":"001101",">":"001110","?":"001111","@":"010000",A:"010001",B:"010010",C:"010011",D:"010100",E:"010101",F:"010110",G:"010111",H:"011000",I:"011001",J:"011010",K:"011011",L:"011100",M:"011101",N:"011110",O:"011111",P:"100000",Q:"100001",R:"100010",S:"100011",T:"100100",U:"100101",V:"100110",W:"100111","`":"101000",a:"101001",b:"101010",c:"101011",d:"101100",e:"101101",f:"101110",g:"101111",h:"110000",i:"110001",j:"110010",k:"110011",l:"110100",m:"110101",n:"110110",o:"110111",p:"111000",q:"111001",r:"111010",s:"111011",t:"111100",u:"111101",v:"111110",w:"111111"},i={0:"@",1:"A",2:"B",3:"C",4:"D",5:"E",6:"F",7:"G",8:"H",9:"I",10:"J",11:"K",12:"L",13:"M",14:"N",15:"O",16:"P",17:"Q",18:"R",19:"S",20:"T",21:"U",22:"V",23:"W",24:"X",25:"Y",26:"Z",27:"[",28:"\\",29:"]",30:"^",31:"_",32:" ",33:"!",34:'"',35:"#",36:"$",37:"%",38:"&",39:"'",40:"(",41:")",42:"*",43:"+",44:",",45:"-",46:".",47:"/",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",58:":",59:";",60:"<",61:"=",62:">",63:"?"};function s(e,t){let a=parseInt(e,2),n="";if("coordinate"===t){a/=1e4,n=parseInt(a/60)+"°"+(a%60).toFixed(4)+"′"}else"cog"===t?n=a/10+"°":"heading"===t&&(n=a+"°");return n}function r(e,a){let n="";switch(e){case 1:case 2:case 3:n=function(e){let a={},n=parseInt(e.slice(0,6),2),i=parseInt(e.slice(6,8),2),r=o(i),l=parseInt(e.slice(8,38),2),u=parseInt(e.slice(38,42),2),f=function(e){let a="";switch(e){case 0:a=t.__("Engine In Use");break;case 1:a=t.__("At Anchor");break;case 2:a=t.__("Not manipulated");break;case 3:a=t.__("Limited airworthiness");break;case 4:a=t.__("Limited by ship draft");break;case 5:a=t.__("Moored");break;case 6:a=t.__("Stranded");break;case 7:a=t.__("Engage In Fishing");break;case 8:a=t.__("During Voyage");break;case 9:a=t.__("Reserved for future correction of navigation status for ships carrying dangerous goods (DG), hazardous substances (HS) or marine pollutants (MP), or carrying IMO Class C dangerous goods or pollutants, high-speed ships (HSC)");break;case 10:a=t.__("Reserved for future amendment of navigational status for ships carrying dangerous goods (DG), harmful substances (HS) or marine pollutants (MP), or IMO hazard or pollutant category A, wing in ground (WIG)");break;case 11:case 12:case 13:a=t.__("Reserved for future use");break;case 14:a=t.__("AIS-SART (Search and Rescue Radar Transponder)");break;case 15:a=t.__("Default");break;default:a=t.__("No Info")}return a}(u),_=4.733*Math.sqrt(parseInt(e.slice(42,50),2))+"°/min",d=parseInt(e.slice(50,60),2)/10+t.__("Knot"),p=parseInt(e.slice(60,61),2),g=function(e){let a="";a="0"===e?t.__("Low(>10m)"):t.__("High(<10m)");return a}(p),I=function(e,t){let a=s(e.slice(1),"coordinate"),n=s(t.slice(1),"coordinate");return"0"===e.slice(0,1)?a="E "+a:"1"===e.slice(0,1)&&(a="W "+a),"0"===t.slice(0,1)?n="N "+n:"1"===t.slice(0,1)&&(n="S "+n),{longitude:a,latitude:n}}(e.slice(61,89),e.slice(89,116)),m=function(e,t){let a=parseInt(e,2),n=parseInt(t,2);return"0"===e.slice(0,1)?a=a/1e4/60:"1"===e.slice(0,1)&&(a=-a/1e4/60),"0"===t.slice(0,1)?n=+n/1e4/60:"1"===t.slice(0,1)&&(n=-n/1e4/60),[a,n]}(e.slice(61,89),e.slice(89,116)),b=I.longitude+" , "+I.latitude,S=s(e.slice(116,128),"cog"),h=s(e.slice(128,137),"heading"),k=parseInt(e.slice(137,143),2),D=function(e){let a="";e<60?a=e+" seconds past the minute":60===e?a=t.__("Unavailable"):61===e?a=t.__("Positioning system in manual input mode"):62===e?a=t.__("Electronic positioning system works in estimation (track estimation) mode"):63===e&&(a=t.__('Positioning system does not work"'));return a}(k),y=parseInt(e.slice(143,145),2),v=function(e){let a="";0===e?a=t.__("Unavailable"):1===e?a=t.__("No specific manipulation"):2===e&&(a=t.__("Specific manipulation"));return a}(y),M=parseInt(e.slice(145,148),2),R=c(M),A=parseInt(e.slice(148,149),2),T=function(e){let a="";0===e?a=t.__("Unused"):1===e&&(a=t.__("In Use"));return a}(A),N=e.slice(149,168),U=function(e,t){let a="",n="",i="";1===e?a="SOTDMA":2===e?a="SOTDMA":3===e&&(a="ITDMA");if("00"===t.slice(0,2)){n="UTC";let e=new Date;e.setHours(parseInt(t.slice(5,10),2)),e.setMinutes(parseInt(t.slice(10,17),2)),i=e.getHours()+":"+e.getMinutes()}t.slice(2,5);return a=a+" "+i+" "+n,a}(n,N);return a={MessageID:{data:n,info:t.__("Ship Position Report")},DataIndicator:{data:i,info:r},UserID:{data:l,info:l},NaviStatus:{data:u,info:f},ROT:{data:_,info:_},SOG:{data:d,info:d},Accuracy:{data:p,info:g},Location:{data:m,info:b},COG:{data:S,info:S},Heading:{data:h,info:h},Second:{data:k,info:D},RegionalApplication:{data:y,info:v},Spare:{data:M,info:R},RAIM:{data:A,info:T},CommunicationState:{data:N,info:U}},a}(a);break;case 4:n=t.__("Base Station Report");break;case 5:n=t.__("Static, Navigation-related Data");break;case 10:n=t.__("UTC/Date Response");break;case 11:n=t.__("Apply for safety related information");break;case 12:n=function(e){let a={},n=parseInt(e.slice(0,6),2),s=parseInt(e.slice(6,8),2),r=o(s),l=parseInt(e.slice(8,38),2),u=parseInt(e.slice(38,40),2),f=parseInt(e.slice(40,70),2),_=parseInt(e.slice(70,71),2),d=function(e){let a="";0===e?a=t.__("NoDuplicateSending"):1===e&&(a=t.__("Resend"));return a}(_),p=parseInt(e.slice(71,72),2),g=c(p),I=e.slice(72),m=function(e){let t="";for(let a=0;a<e.length;a+=6)t+=i[parseInt(e.substr(a,6),2)];return t}(I);return a={MessageID:{data:n,info:"安全相关确认"},DataIndicator:{data:s,info:r},SourceID:{data:l,info:l},SerialID:{data:u,info:u},DestinationID:{data:f,info:f},RepeatFlag:{data:_,info:d},Spare:{data:p,info:g},SecureText:{data:I,info:m}},a}(a);break;case 13:n=t.__("Broadcast information");break;default:n=t.__("No such information")}return n}function o(e){let a="";return a=0===e?t.__("Default"):3===e?t.__("No Longer Transmit"):t.__("Transmit Times")+": "+e,a}function c(e){let a="";return 0===e&&(a=t.__("Unused")),a}var l="0.1.2";let u={};u.version=l,u.i18n=a,u.setLocale=function(e){a.setLocale(e)},u.verify=function(e){return!(e.toString().split(",").length<7)},u.parse=function(e){if(!u.verify(e))return!1;let t=function(e){let t={};return t=r(parseInt(e.slice(0,6),2),e),t}(function(e){let t="";for(let a=0;a<e.length;a++)t+=n[e[a]];return t}(function(e){let t=e.toString().split(",");return{type:t[0],total:t[1],order:t[2],series:t[3],channel:t[4],message:t[5],fill:t[6]}}(e).message));return t.text=e,t},module.exports=u;
